# Level_1 3주차

## 공부 내용
- **변수 범위(Scope)**  
자바스크립트에서 변수 선언 시, var를 반드시 써야 지역변수로 쓸 수 있다.  
var를 안쓸 시, 전역변수로 선언됨. 전역변수는 다른 모든 함수영역에서 참조할 수 있기 때문에, 의도치 않게 값이 바뀌는 등의 오류가 발생하기 쉽다.(매우 위험) 따라서 전역변수의 사용은 지양하도록 한다.  

- **Lexical Scope**  
함수를 처음 선언하는 순간, 함수 내부의 변수는 자기 스코프로부터 가장 가까운 변수를 참조한다.  
(중첩 된 함수에서 변수 이름을 처리하는 방법을 의미)  
코드 실행 단계에서 변수들의 참조 우선순위가 정해짐을 의미하는 듯  

- **Scope Chain**  
식별자를 찾는 일련의 과정.  
즉, 하위 스코프에서 찾는 변수명이 없을 시, 그 다음 가까운 상위 스코프의 해당 변수명을 찾아 참조하는 방식.  


- **호이스팅(Hoisting)**  
Hoist란 사전적 정의로 '끌어올리기'라는 뜻을 가지고 있다. 자바스크립트에서 끌어올려지는 것은 *변수*이다.  
`모든 변수 선언은 호이스트가 된다`  
호이스트란, 변수의 정의가 그 범위에 따라 선언과 할당이 분리되는 것을 의미한다.  
즉, 변수가 함수내에서 정의되었을 경우, 선언이 함수의 최상위로, 함수 밖에서 정의되었을 경우, 전역 컨텍스트의 최상위로 변경된다.  

```
function foo() {
    if (true) {
        var name = 'SuTae';
    }
    console.log(name); // SuTae
}
foo();
```
위 코드를 실행하면, 콘솔에는 'SuTae'가 찍힌다. 자바스크립트는 블록스코프가 아닌 함수스코프를 따르기 때문이다. 이때,
여기서 호이스팅이라는 개념이 나온다.  
자바스크립트의 엔진에서 위의 코드는 다음과 같이 변수처리를 하게된다.
```
function foo() {
    var name;
    if (true) {
        name = 'SuTae';
    }
    console.log(name); // SuTae
}
foo();
```
'name'이라는 변수가 함수의 맨 꼭대기로 이동한 것을 볼 수 있을 것이다. 이렇듯, 자바스크립트 엔진은 내부에서 할당된 변수는 반드시 함수의 시작 위치로 끌어올려서 선언한다. 이를 호이스팅이라고 한다.

```
function foo() {
    a = 10;
    var a;
    console.log(a); // 10
}
foo();
```
변수 선언 전에 값이 할당 되었지만, 콘솔에는 '10'이 문제없이 출력된다. 자바스크립트 엔진이 변수'a'의 선언부를 함수의 시작 위치로 끌어올리기 때문이다.  

- **클로저(Closure)**  
어떤 함수가 그 함수를 둘러싼 환경을 기억하는 것  
```
var color = 'red';
function foo() {
    var color = 'blue'; // 2
    function foo2() {
        console.log(color); // 1
    }
    return foo2;
}
var ex = foo(); // 3
ex(); // 4
```
위 코드를 실행해 보면, 'blue'가 출력된다.  그 과정을 순서대로 살펴보자.  

1.  foo2 는  foo 의 렉시컬 환경을 참조하며, 이를 저장한다.

2.  foo2 는  ex 라는 글로벌 변수에 할당된다.

3.  ex 호출시  color 값을 찾는다. 하지만 찾을 수 없자 저장했던 바깥 환경을 참조한다.

4.  바깥 환경인  foo 에서  color 값을 찾았고  blue 가 출력된다.  

여기서 중요한 사실은  foo 가 종료된 이후에도  foo 의 렉시컬 환경을 참조할 수 있다는 것이다. 함수가 종료되면 본래 가비지콜렉터(GC)가 이를 회수해야 하는데,  foo2 가 여전히  foo 의 환경을 참조(저장)하고 있다. 따라서 GC는 함부로 이를 회수하지 못하는 것이다. 아래 그림과 같은 상황이다.  
![클로저](https://t1.daumcdn.net/cfile/tistory/99595C395A51899629)  

([참조 : 스코프와 클로저](http://kim-solshar.tistory.com/39))  

## 부족한 부분
개념 정리

## 느낀 점
실습도 중요하지만, 실습에 필요한 이론에 대해서 알아야 하는 것도 중요하다. 그러나 역시 이론을 이해하는데 어려움이 많다. 꾸준한 반복만이 해결책일까 싶다..  

## 내일 할 일
- 인프런 '숫자 퍼즐 준비' 강의 듣기
- 알고리즘 1문제 풀기
- 오늘 공부한 이론 복습

### ***오늘의 TIP***  
